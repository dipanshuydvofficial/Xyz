<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEET Resources Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#8B5CF6',
                        dark: '#1F2937',
                        light: '#F9FAFB'
                    },
                    fontFamily: {
                        poppins: ['Poppins', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #F3F4F6;
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .active-link {
            border-bottom: 3px solid #3B82F6;
            color: #3B82F6;
        }
        .resource-card {
            transition: all 0.3s ease;
        }
        .resource-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .slide-in {
            transform: translateX(0);
            transition: transform 0.3s ease;
        }
        .slide-out {
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        .admin-panel {
            position: fixed;
            top: 0;
            right: 0;
            height: 100vh;
            width: 100%;
            max-width: 500px;
            z-index: 100;
            background: white;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
        }
        .hidden-panel {
            transform: translateX(100%);
        }
        .visible-panel {
            transform: translateX(0);
        }
        .delete-btn {
            transition: all 0.2s ease;
        }
        .delete-btn:hover {
            background-color: #EF4444;
            color: white;
        }
        .edit-btn {
            transition: all 0.2s ease;
        }
        .edit-btn:hover {
            background-color: #3B82F6;
            color: white;
        }
        .edit-form-container {
            background-color: #F9FAFB;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-top: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="font-poppins">
    <!-- Navigation Bar -->
    <nav class="bg-white shadow-md py-4 px-4 md:px-8 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <div class="bg-primary w-10 h-10 rounded-lg flex items-center justify-center">
                    <i class="fas fa-book text-white text-xl"></i>
                </div>
                <span class="text-xl font-bold text-dark">NEET<span class="text-primary">Hub</span></span>
            </div>
            
            <div class="hidden md:flex space-x-8">
                <a href="#" class="text-gray-600 hover:text-primary font-medium active-link">Home</a>
                <a href="#" class="text-gray-600 hover:text-primary font-medium">Resources</a>
                <a href="#" class="text-gray-600 hover:text-primary font-medium">Practice</a>
                <a href="#" class="text-gray-600 hover:text-primary font-medium">About</a>
            </div>
            
            <div class="flex items-center space-x-4">
                <button id="loginBtn" class="hidden md:block bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition duration-300">
                    Login
                </button>
                <button id="logoutBtn" class="hidden md:block bg-gray-200 hover:bg-gray-300 text-dark px-4 py-2 rounded-lg font-medium transition duration-300">
                    Logout
                </button>
                <button id="adminPanelBtn" class="hidden md:block bg-accent hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium transition duration-300">
                    Admin Panel
                </button>
                <button class="md:hidden text-dark">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-8">
        <!-- Hero Section -->
        <section id="heroSection" class="mb-12 fade-in">
            <div class="bg-gradient-to-r from-primary to-accent rounded-2xl p-8 text-white">
                <div class="max-w-2xl">
                    <h1 class="text-3xl md:text-4xl font-bold mb-4">Your Ultimate NEET Preparation Hub</h1>
                    <p class="text-lg mb-6">Access study materials, previous year papers, and expert notes - all in one place.</p>
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                        <button id="exploreResourcesBtn" class="bg-white text-primary font-bold px-6 py-3 rounded-lg hover:bg-gray-100 transition duration-300">
                            Explore Resources
                        </button>
                        <button class="bg-transparent border-2 border-white text-white font-bold px-6 py-3 rounded-lg hover:bg-white/10 transition duration-300">
                            Join Community
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section id="categoriesSection" class="mb-12 fade-in">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-dark">Browse Categories</h2>
                <a href="#" class="text-primary font-medium">View All</a>
            </div>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-white rounded-xl p-6 shadow-sm card-hover cursor-pointer" onclick="filterResources('Short Notes')">
                    <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-4">
                        <i class="fas fa-file-alt text-primary text-xl"></i>
                    </div>
                    <h3 class="font-semibold text-lg mb-2">Short Notes</h3>
                    <p class="text-gray-600 text-sm">Quick revision materials</p>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-sm card-hover cursor-pointer" onclick="filterResources('Best Books')">
                    <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mb-4">
                        <i class="fas fa-book text-secondary text-xl"></i>
                    </div>
                    <h3 class="font-semibold text-lg mb-2">Best Books</h3>
                    <p class="text-gray-600 text-sm">Recommended textbooks</p>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-sm card-hover cursor-pointer" onclick="filterResources('Previous Papers')">
                    <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mb-4">
                        <i class="fas fa-file-pdf text-accent text-xl"></i>
                    </div>
                    <h3 class="font-semibold text-lg mb-2">Previous Papers</h3>
                    <p class="text-gray-600 text-sm">Past exam questions</p>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-sm card-hover cursor-pointer" onclick="filterResources('Video Lectures')">
                    <div class="w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center mb-4">
                        <i class="fas fa-video text-yellow-500 text-xl"></i>
                    </div>
                    <h3 class="font-semibold text-lg mb-2">Video Lectures</h3>
                    <p class="text-gray-600 text-sm">Expert explanations</p>
                </div>
            </div>
        </section>

        <!-- Resources Section -->
        <section id="resourcesSection" class="mb-12 fade-in">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                <h2 class="text-2xl font-bold text-dark mb-4 md:mb-0">Latest Resources</h2>
                <div class="flex space-x-4 w-full md:w-auto">
                    <div class="relative w-full md:w-64">
                        <input type="text" id="searchInput" placeholder="Search resources..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <select id="categoryFilter" class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                        <option value="">All Categories</option>
                        <option value="Short Notes">Short Notes</option>
                        <option value="Best Books">Best Books</option>
                        <option value="Previous Papers">Previous Papers</option>
                        <option value="Video Lectures">Video Lectures</option>
                    </select>
                </div>
            </div>
            
            <div id="resourcesContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Resources will be dynamically loaded here -->
            </div>
        </section>

        <!-- Stats Section -->
        <section id="statsSection" class="mb-12 fade-in">
            <div class="bg-white rounded-2xl p-8 shadow-sm">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
                    <div>
                        <div class="text-3xl font-bold text-primary mb-2">15K+</div>
                        <div class="text-gray-600">Active Students</div>
                    </div>
                    <div>
                        <div class="text-3xl font-bold text-secondary mb-2">500+</div>
                        <div class="text-gray-600">Study Resources</div>
                    </div>
                    <div>
                        <div class="text-3xl font-bold text-accent mb-2">98%</div>
                        <div class="text-gray-600">Success Rate</div>
                    </div>
                    <div>
                        <div class="text-3xl font-bold text-yellow-500 mb-2">24/7</div>
                        <div class="text-gray-600">Support</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white py-12">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <div class="bg-primary w-8 h-8 rounded-lg flex items-center justify-center">
                            <i class="fas fa-book text-white"></i>
                        </div>
                        <span class="text-xl font-bold">NEET<span class="text-primary">Hub</span></span>
                    </div>
                    <p class="text-gray-400 mb-4">Your ultimate destination for NEET preparation resources and study materials.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white">Home</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Resources</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Practice Tests</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Study Plans</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Success Stories</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Resources</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white">Short Notes</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Best Books</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Previous Papers</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Video Lectures</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Mock Tests</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact Us</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li class="flex items-start">
                            <i class="fas fa-map-marker-alt mt-1 mr-3"></i>
                            <span>123 Education Street, Mumbai, India</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone-alt mr-3"></i>
                            <span>+91 98765 43210</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-envelope mr-3"></i>
                            <span>support@neethub.com</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-500">
                <p>&copy; 2023 NEET Resources Hub. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl w-full max-w-md p-8 relative">
            <button id="closeModal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <i class="fas fa-times text-xl"></i>
            </button>
            
            <div class="text-center mb-8">
                <div class="mx-auto bg-primary w-16 h-16 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-user text-white text-2xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-dark">Welcome Back</h2>
                <p class="text-gray-600">Sign in to access your resources</p>
            </div>
            
            <form id="loginForm">
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="email">Email Address</label>
                    <input type="email" id="email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="you@example.com" required>
                </div>
                
                <div class="mb-6">
                    <label class="block text-gray-700 mb-2" for="password">Password</label>
                    <input type="password" id="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="••••••••" required>
                </div>
                
                <div class="flex justify-between items-center mb-6">
                    <div class="flex items-center">
                        <input type="checkbox" id="remember" class="mr-2">
                        <label for="remember" class="text-gray-700">Remember me</label>
                    </div>
                    <a href="#" id="forgotPasswordLink" class="text-primary hover:underline">Forgot password?</a>
                </div>
                
                <button type="submit" class="w-full bg-primary hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300 mb-4">
                    Sign In
                </button>
                
                <div class="text-center text-gray-600 mb-4">or</div>
                
                <button type="button" id="googleLoginBtn" class="w-full border border-gray-300 text-gray-700 font-medium py-3 px-4 rounded-lg flex items-center justify-center mb-6">
                    <i class="fab fa-google mr-2 text-red-500"></i>
                    Continue with Google
                </button>
                
                <p class="text-center text-gray-600">
                    Don't have an account? <a href="#" id="signupLink" class="text-primary font-medium hover:underline">Sign up</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl w-full max-w-md p-8 relative">
            <button id="closeSignupModal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <i class="fas fa-times text-xl"></i>
            </button>
            
            <div class="text-center mb-8">
                <div class="mx-auto bg-primary w-16 h-16 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-user-plus text-white text-2xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-dark">Create Account</h2>
                <p class="text-gray-600">Join NEET Resources Hub today</p>
            </div>
            
            <form id="signupForm">
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="signupName">Full Name</label>
                    <input type="text" id="signupName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Your full name" required>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="signupEmail">Email Address</label>
                    <input type="email" id="signupEmail" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="you@example.com" required>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Create a password" required>
                </div>
                
                <div class="mb-6">
                    <label class="block text-gray-700 mb-2" for="signupConfirmPassword">Confirm Password</label>
                    <input type="password" id="signupConfirmPassword" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Confirm your password" required>
                </div>
                
                <button type="submit" class="w-full bg-primary hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300 mb-4">
                    Create Account
                </button>
                
                <p class="text-center text-gray-600">
                    Already have an account? <a href="#" id="loginFromSignup" class="text-primary font-medium hover:underline">Sign in</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgotPasswordModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl w-full max-w-md p-8 relative">
            <button id="closeForgotPasswordModal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <i class="fas fa-times text-xl"></i>
            </button>
            
            <div class="text-center mb-8">
                <div class="mx-auto bg-primary w-16 h-16 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-key text-white text-2xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-dark">Reset Password</h2>
                <p class="text-gray-600">Enter your email to reset your password</p>
            </div>
            
            <form id="forgotPasswordForm">
                <div class="mb-6">
                    <label class="block text-gray-700 mb-2" for="resetEmail">Email Address</label>
                    <input type="email" id="resetEmail" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="you@example.com" required>
                </div>
                
                <button type="submit" class="w-full bg-primary hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300 mb-4">
                    Send Reset Link
                </button>
                
                <p class="text-center text-gray-600">
                    Remember your password? <a href="#" id="loginFromForgot" class="text-primary font-medium hover:underline">Sign in</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-panel hidden-panel visible-panel hidden">
        <div class="h-full flex flex-col">
            <div class="p-6 border-b border-gray-200 flex justify-between items-center">
                <h2 class="text-xl font-bold text-dark">Admin Panel</h2>
                <button id="closeAdminPanel" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="flex-1 overflow-y-auto p-6">
                <div class="mb-8">
                    <h3 class="text-lg font-semibold mb-4">Add New Resource</h3>
                    <form id="addResourceForm">
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2" for="resourceTitle">Title</label>
                            <input type="text" id="resourceTitle" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2" for="resourceCategory">Category</label>
                            <select id="resourceCategory" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required>
                                <option value="Short Notes">Short Notes</option>
                                <option value="Best Books">Best Books</option>
                                <option value="Previous Papers">Previous Papers</option>
                                <option value="Video Lectures">Video Lectures</option>
                            </select>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2" for="resourceDescription">Description</label>
                            <textarea id="resourceDescription" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" rows="3" required></textarea>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2" for="resourceLink">Resource Link</label>
                            <input type="url" id="resourceLink" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="https://example.com/resource.pdf" required>
                        </div>
                        
                        <button type="submit" class="w-full bg-accent hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                            Add Resource
                        </button>
                    </form>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Manage Resources</h3>
                    <div id="adminResourcesList" class="space-y-4">
                        <!-- Resources will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Resource Preview Modal -->
    <div id="resourcePreviewModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-hidden">
            <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                <h3 id="previewTitle" class="text-lg font-bold text-dark">Resource Preview</h3>
                <div>
                    <a id="downloadLink" href="#" target="_blank" class="text-primary hover:underline mr-4">
                        <i class="fas fa-download mr-1"></i> Download
                    </a>
                    <button id="closePreviewModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-4">
                <iframe id="resourcePreviewFrame" src="" class="w-full h-[70vh] border-0"></iframe>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteConfirmationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl w-full max-w-md p-8 relative">
            <div class="text-center">
                <div class="mx-auto bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-exclamation-triangle text-red-500 text-2xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-dark mb-2">Confirm Deletion</h2>
                <p class="text-gray-600 mb-6">Are you sure you want to delete this resource? This action cannot be undone.</p>
                
                <div class="flex justify-center space-x-4">
                    <button id="cancelDeleteBtn" class="bg-gray-200 hover:bg-gray-300 text-dark font-bold py-2 px-6 rounded-lg transition duration-300">
                        Cancel
                    </button>
                    <button id="confirmDeleteBtn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-6 rounded-lg transition duration-300">
                        Delete
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Resource Modal -->
    <div id="editResourceModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl w-full max-w-md p-8 relative">
            <button id="closeEditModal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <i class="fas fa-times text-xl"></i>
            </button>
            
            <div class="text-center mb-6">
                <div class="mx-auto bg-accent w-16 h-16 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-edit text-white text-2xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-dark">Edit Resource</h2>
            </div>
            
            <form id="editResourceForm">
                <input type="hidden" id="editResourceId">
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="editResourceTitle">Title</label>
                    <input type="text" id="editResourceTitle" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="editResourceCategory">Category</label>
                    <select id="editResourceCategory" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required>
                        <option value="Short Notes">Short Notes</option>
                        <option value="Best Books">Best Books</option>
                        <option value="Previous Papers">Previous Papers</option>
                        <option value="Video Lectures">Video Lectures</option>
                    </select>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="editResourceDescription">Description</label>
                    <textarea id="editResourceDescription" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" rows="3" required></textarea>
                </div>
                
                <div class="mb-6">
                    <label class="block text-gray-700 mb-2" for="editResourceLink">Resource Link</label>
                    <input type="url" id="editResourceLink" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="https://example.com/resource.pdf" required>
                </div>
                
                <button type="submit" class="w-full bg-accent hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                    Update Resource
                </button>
            </form>
        </div>
    </div>

    <script>
        // Initialize Supabase
        const SUPABASE_URL = 'https://qratndpgxahzayqbgmht.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyYXRuZHBneGFoemF5cWJnbWh0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczMjAyODQsImV4cCI6MjA3Mjg5NjI4NH0.Jb6Pau9Lzj3axn6p_eOK3zWl8eiVL4N0KaYf4EGSrms';
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        // Sample data for resources
        let resources = [
            {
                id: 1,
                title: "Biology: Cell Structure & Function",
                category: "Short Notes",
                description: "Comprehensive notes covering cell organelles, functions, and diagrams for quick revision.",
                date: "May 15, 2023",
                link: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf"
            },
            {
                id: 2,
                title: "NCERT Physics Class 11 & 12",
                category: "Best Books",
                description: "Complete set of NCERT textbooks for Physics with solutions and explanations.",
                date: "Apr 28, 2023",
                link: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf"
            },
            {
                id: 3,
                title: "NEET 2022 Question Paper",
                category: "Previous Papers",
                description: "Official question paper with answer key and detailed solutions.",
                date: "Jun 10, 2023",
                link: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf"
            },
            {
                id: 4,
                title: "Chemistry: Organic Reactions",
                category: "Video Lectures",
                description: "Detailed video explanations of important organic reactions for NEET.",
                date: "Mar 22, 2023",
                link: "https://www.youtube.com/embed/dQw4w9WgXcQ"
            },
            {
                id: 5,
                title: "Physics: Laws of Motion",
                category: "Short Notes",
                description: "Concise notes on Newton's laws with examples and problem-solving techniques.",
                date: "Feb 14, 2023",
                link: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf"
            },
            {
                id: 6,
                title: "MTG Biology for NEET",
                category: "Best Books",
                description: "Comprehensive biology book with diagrams, flowcharts, and practice questions.",
                date: "Jan 30, 2023",
                link: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf"
            }
        ];

        // DOM Elements
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const adminPanelBtn = document.getElementById('adminPanelBtn');
        const loginModal = document.getElementById('loginModal');
        const signupModal = document.getElementById('signupModal');
        const forgotPasswordModal = document.getElementById('forgotPasswordModal');
        const adminPanel = document.getElementById('adminPanel');
        const resourcePreviewModal = document.getElementById('resourcePreviewModal');
        const deleteConfirmationModal = document.getElementById('deleteConfirmationModal');
        const editResourceModal = document.getElementById('editResourceModal');
        const closeModal = document.getElementById('closeModal');
        const closeSignupModal = document.getElementById('closeSignupModal');
        const closeForgotPasswordModal = document.getElementById('closeForgotPasswordModal');
        const closeAdminPanel = document.getElementById('closeAdminPanel');
        const closePreviewModal = document.getElementById('closePreviewModal');
        const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
        const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
        const closeEditModal = document.getElementById('closeEditModal');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const forgotPasswordForm = document.getElementById('forgotPasswordForm');
        const addResourceForm = document.getElementById('addResourceForm');
        const editResourceForm = document.getElementById('editResourceForm');
        const googleLoginBtn = document.getElementById('googleLoginBtn');
        const resourcesContainer = document.getElementById('resourcesContainer');
        const searchInput = document.getElementById('searchInput');
        const categoryFilter = document.getElementById('categoryFilter');
        const forgotPasswordLink = document.getElementById('forgotPasswordLink');
        const signupLink = document.getElementById('signupLink');
        const loginFromSignup = document.getElementById('loginFromSignup');
        const loginFromForgot = document.getElementById('loginFromForgot');
        const exploreResourcesBtn = document.getElementById('exploreResourcesBtn');
        const downloadLink = document.getElementById('downloadLink');
        const previewTitle = document.getElementById('previewTitle');
        const resourcePreviewFrame = document.getElementById('resourcePreviewFrame');

        // State
        let currentUser = null;
        let isAdmin = false;
        let filteredResources = [...resources];
        let resourceToDelete = null;
        let resourceToEdit = null;

        // Initialize the app
        function initApp() {
            renderResources(resources);
            checkAuthState();
            setupEventListeners();
        }

        // Set up event listeners
        function setupEventListeners() {
            // Auth buttons
            loginBtn.addEventListener('click', () => showLoginModal());
            logoutBtn.addEventListener('click', logout);
            adminPanelBtn.addEventListener('click', () => showAdminPanel(true));
            
            // Modal controls
            closeModal.addEventListener('click', () => hideLoginModal());
            closeSignupModal.addEventListener('click', () => hideSignupModal());
            closeForgotPasswordModal.addEventListener('click', () => hideForgotPasswordModal());
            closeAdminPanel.addEventListener('click', () => showAdminPanel(false));
            closePreviewModal.addEventListener('click', () => hideResourcePreview());
            cancelDeleteBtn.addEventListener('click', () => hideDeleteConfirmation());
            confirmDeleteBtn.addEventListener('click', confirmDeleteResource);
            closeEditModal.addEventListener('click', () => hideEditResourceModal());
            
            // Form submissions
            loginForm.addEventListener('submit', handleLogin);
            signupForm.addEventListener('submit', handleSignup);
            forgotPasswordForm.addEventListener('submit', handleForgotPassword);
            addResourceForm.addEventListener('submit', handleAddResource);
            editResourceForm.addEventListener('submit', handleEditResource);
            
            // Google login
            googleLoginBtn.addEventListener('click', signInWithGoogle);
            
            // Navigation links
            forgotPasswordLink.addEventListener('click', (e) => {
                e.preventDefault();
                hideLoginModal();
                showForgotPasswordModal();
            });
            
            signupLink.addEventListener('click', (e) => {
                e.preventDefault();
                hideLoginModal();
                showSignupModal();
            });
            
            loginFromSignup.addEventListener('click', (e) => {
                e.preventDefault();
                hideSignupModal();
                showLoginModal();
            });
            
            loginFromForgot.addEventListener('click', (e) => {
                e.preventDefault();
                hideForgotPasswordModal();
                showLoginModal();
            });
            
            // Resource filtering
            searchInput.addEventListener('input', filterResourcesBySearch);
            categoryFilter.addEventListener('change', filterResourcesByCategory);
            
            // Explore button
            exploreResourcesBtn.addEventListener('click', () => {
                document.getElementById('resourcesSection').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === loginModal) hideLoginModal();
                if (e.target === signupModal) hideSignupModal();
                if (e.target === forgotPasswordModal) hideForgotPasswordModal();
                if (e.target === resourcePreviewModal) hideResourcePreview();
                if (e.target === deleteConfirmationModal) hideDeleteConfirmation();
                if (e.target === editResourceModal) hideEditResourceModal();
            });
        }

        // Authentication functions
        function showLoginModal() {
            loginModal.classList.remove('hidden');
        }

        function hideLoginModal() {
            loginModal.classList.add('hidden');
        }

        function showSignupModal() {
            signupModal.classList.remove('hidden');
        }

        function hideSignupModal() {
            signupModal.classList.add('hidden');
        }

        function showForgotPasswordModal() {
            forgotPasswordModal.classList.remove('hidden');
        }

        function hideForgotPasswordModal() {
            forgotPasswordModal.classList.add('hidden');
        }

        function showAdminPanel(show) {
            if (show) {
                adminPanel.classList.remove('hidden');
                setTimeout(() => {
                    adminPanel.classList.add('visible-panel');
                    adminPanel.classList.remove('hidden-panel');
                }, 10);
                renderAdminResources();
            } else {
                adminPanel.classList.add('hidden-panel');
                adminPanel.classList.remove('visible-panel');
                setTimeout(() => {
                    adminPanel.classList.add('hidden');
                }, 300);
            }
        }

        async function handleSignup(e) {
            e.preventDefault();
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const name = document.getElementById('signupName').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;

            // Validation
            if (password !== confirmPassword) {
                alert('Passwords do not match');
                return;
            }

            try {
                const { data, error } = await supabase.auth.signUp({
                    email,
                    password,
                    options: {
                        data: {
                            full_name: name
                        },
                        emailRedirectTo: 'https://neetresourceshub.netlify.app'
                    }
                });

                if (error) throw error;
                
                alert('Signup successful! Please check your email for confirmation.');
                hideSignupModal();
            } catch (error) {
                alert(error.message);
            }
        }

        async function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            try {
                const { data, error } = await supabase.auth.signInWithPassword({
                    email,
                    password
                });

                if (error) throw error;
                
                currentUser = data.user;
                isAdmin = email === 'admin@neethub.com'; // Your admin email
                hideLoginModal();
                updateAuthUI();
                alert('Login successful!');
            } catch (error) {
                alert(error.message);
            }
        }

        async function signInWithGoogle() {
            try {
                const { data, error } = await supabase.auth.signInWithOAuth({
                    provider: 'google',
                    options: {
                        redirectTo: 'https://neetresourceshub.netlify.app'
                    }
                });

                if (error) throw error;
            } catch (error) {
                alert(error.message);
            }
        }

        async function logout() {
            try {
                const { error } = await supabase.auth.signOut();
                if (error) throw error;
                
                currentUser = null;
                isAdmin = false;
                updateAuthUI();
                alert('You have been logged out successfully!');
            } catch (error) {
                alert(error.message);
            }
        }

        async function handleForgotPassword(e) {
            e.preventDefault();
            const email = document.getElementById('resetEmail').value;

            try {
                const { data, error } = await supabase.auth.resetPasswordForEmail(email, {
                    redirectTo: 'https://neetresourceshub.netlify.app/reset-password'
                });

                if (error) throw error;
                
                hideForgotPasswordModal();
                alert('Password reset email sent. Please check your inbox.');
            } catch (error) {
                alert(error.message);
            }
        }

        // Check auth state on page load
        supabase.auth.onAuthStateChange((event, session) => {
            if (event === 'SIGNED_IN') {
                currentUser = session.user;
                isAdmin = session.user.email === 'admin@neethub.com';
                updateAuthUI();
            } else if (event === 'SIGNED_OUT') {
                currentUser = null;
                isAdmin = false;
                updateAuthUI();
            }
        });

        function updateAuthUI() {
            if (currentUser) {
                loginBtn.classList.add('hidden');
                logoutBtn.classList.remove('hidden');
                if (isAdmin) {
                    adminPanelBtn.classList.remove('hidden');
                } else {
                    adminPanelBtn.classList.add('hidden');
                }
            } else {
                loginBtn.classList.remove('hidden');
                logoutBtn.classList.add('hidden');
                adminPanelBtn.classList.add('hidden');
            }
        }

        // Resource functions
        function renderResources(resourcesToRender) {
            resourcesContainer.innerHTML = '';
            
            if (resourcesToRender.length === 0) {
                resourcesContainer.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fas fa-search text-4xl text-gray-400 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-700 mb-2">No resources found</h3>
                        <p class="text-gray-500">Try adjusting your search or filter criteria</p>
                    </div>
                `;
                return;
            }
            
            resourcesToRender.forEach(resource => {
                const resourceCard = document.createElement('div');
                resourceCard.className = 'bg-white rounded-xl shadow-sm overflow-hidden resource-card';
                resourceCard.innerHTML = `
                    <div class="p-5">
                        <div class="flex justify-between items-start mb-3">
                            <div class="bg-${getCategoryColor(resource.category)} text-${getCategoryTextColor(resource.category)} px-3 py-1 rounded-full text-sm font-medium">
                                ${resource.category}
                            </div>
                            <div class="flex space-x-2">
                                <button class="text-gray-500 hover:text-primary">
                                    <i class="fas fa-heart"></i>
                                </button>
                                <button class="text-gray-500 hover:text-primary">
                                    <i class="fas fa-bookmark"></i>
                                </button>
                            </div>
                        </div>
                        <h3 class="font-bold text-lg mb-2">${resource.title}</h3>
                        <p class="text-gray-600 text-sm mb-4">${resource.description}</p>
                        <div class="flex justify-between items-center">
                            <div class="flex items-center text-gray-500 text-sm">
                                <i class="far fa-calendar mr-1"></i>
                                <span>${resource.date}</span>
                            </div>
                            <button class="view-resource-btn bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-300" data-link="${resource.link}" data-title="${resource.title}">
                                ${resource.category === 'Video Lectures' ? 'Watch Now' : 'View PDF'}
                            </button>
                        </div>
                    </div>
                `;
                resourcesContainer.appendChild(resourceCard);
            });
            
            // Add event listeners to view buttons
            document.querySelectorAll('.view-resource-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const link = e.target.getAttribute('data-link');
                    const title = e.target.getAttribute('data-title');
                    showResourcePreview(link, title);
                });
            });
        }

        function getCategoryColor(category) {
            switch(category) {
                case 'Short Notes': return 'blue-100';
                case 'Best Books': return 'green-100';
                case 'Previous Papers': return 'purple-100';
                case 'Video Lectures': return 'yellow-100';
                default: return 'gray-100';
            }
        }

        function getCategoryTextColor(category) {
            switch(category) {
                case 'Short Notes': return 'primary';
                case 'Best Books': return 'secondary';
                case 'Previous Papers': return 'accent';
                case 'Video Lectures': return 'yellow-600';
                default: return 'gray-700';
            }
        }

        function filterResources(category) {
            categoryFilter.value = category;
            filterResourcesByCategory();
        }

        function filterResourcesBySearch() {
            const searchTerm = searchInput.value.toLowerCase();
            const category = categoryFilter.value;
            
            filteredResources = resources.filter(resource => {
                const matchesSearch = resource.title.toLowerCase().includes(searchTerm) || 
                                     resource.description.toLowerCase().includes(searchTerm);
                const matchesCategory = category ? resource.category === category : true;
                return matchesSearch && matchesCategory;
            });
            
            renderResources(filteredResources);
        }

        function filterResourcesByCategory() {
            const category = categoryFilter.value;
            const searchTerm = searchInput.value.toLowerCase();
            
            filteredResources = resources.filter(resource => {
                const matchesCategory = category ? resource.category === category : true;
                const matchesSearch = resource.title.toLowerCase().includes(searchTerm) || 
                                     resource.description.toLowerCase().includes(searchTerm);
                return matchesCategory && matchesSearch;
            });
            
            renderResources(filteredResources);
        }

        function showResourcePreview(link, title) {
            previewTitle.textContent = title;
            downloadLink.href = link;
            resourcePreviewFrame.src = link;
            resourcePreviewModal.classList.remove('hidden');
        }

        function hideResourcePreview() {
            resourcePreviewModal.classList.add('hidden');
            resourcePreviewFrame.src = '';
        }

        // Admin functions
        function handleAddResource(e) {
            e.preventDefault();
            const title = document.getElementById('resourceTitle').value;
            const category = document.getElementById('resourceCategory').value;
            const description = document.getElementById('resourceDescription').value;
            const link = document.getElementById('resourceLink').value;
            
            // Validation
            if (!title || !category || !description || !link) {
                alert('Please fill in all fields');
                return;
            }
            
            // Add new resource
            const newResource = {
                id: resources.length > 0 ? Math.max(...resources.map(r => r.id)) + 1 : 1,
                title,
                category,
                description,
                date: new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }),
                link
            };
            
            resources.unshift(newResource);
            filteredResources = [...resources];
            renderResources(filteredResources);
            renderAdminResources();
            
            // Reset form
            addResourceForm.reset();
            alert('Resource added successfully!');
        }

        function renderAdminResources() {
            const adminResourcesList = document.getElementById('adminResourcesList');
            adminResourcesList.innerHTML = '';
            
            if (resources.length === 0) {
                adminResourcesList.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-book-open text-3xl mb-2"></i>
                        <p>No resources available</p>
                    </div>
                `;
                return;
            }
            
            resources.forEach(resource => {
                const resourceItem = document.createElement('div');
                resourceItem.className = 'border border-gray-200 rounded-lg p-4';
                resourceItem.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <h4 class="font-semibold">${resource.title}</h4>
                            <p class="text-sm text-gray-600">${resource.category}</p>
                        </div>
                        <div class="flex space-x-2">
                            <button class="edit-resource-btn edit-btn p-2 rounded-lg text-blue-500 hover:text-white" data-id="${resource.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="delete-resource-btn delete-btn p-2 rounded-lg text-red-500 hover:text-white" data-id="${resource.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <p class="text-sm text-gray-700 mt-2">${resource.description}</p>
                    <div class="mt-3 text-xs text-gray-500">
                        Added on: ${resource.date}
                    </div>
                `;
                adminResourcesList.appendChild(resourceItem);
            });
            
            // Add event listeners for edit and delete
            document.querySelectorAll('.edit-resource-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.getAttribute('data-id'));
                    showEditResourceModal(id);
                });
            });
            
            document.querySelectorAll('.delete-resource-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.getAttribute('data-id'));
                    showDeleteConfirmation(id);
                });
            });
        }

        function showEditResourceModal(id) {
            const resource = resources.find(r => r.id === id);
            if (!resource) return;
            
            // Populate form with resource data
            document.getElementById('editResourceId').value = resource.id;
            document.getElementById('editResourceTitle').value = resource.title;
            document.getElementById('editResourceCategory').value = resource.category;
            document.getElementById('editResourceDescription').value = resource.description;
            document.getElementById('editResourceLink').value = resource.link;
            
            // Show modal
            editResourceModal.classList.remove('hidden');
        }

        function hideEditResourceModal() {
            editResourceModal.classList.add('hidden');
        }

        function handleEditResource(e) {
            e.preventDefault();
            const id = parseInt(document.getElementById('editResourceId').value);
            const title = document.getElementById('editResourceTitle').value;
            const category = document.getElementById('editResourceCategory').value;
            const description = document.getElementById('editResourceDescription').value;
            const link = document.getElementById('editResourceLink').value;
            
            // Find and update resource
            const resourceIndex = resources.findIndex(r => r.id === id);
            if (resourceIndex !== -1) {
                resources[resourceIndex] = {
                    ...resources[resourceIndex],
                    title,
                    category,
                    description,
                    link
                };
                
                // Update filtered resources and re-render
                filteredResources = [...resources];
                renderResources(filteredResources);
                renderAdminResources();
                
                // Close modal and show success message
                hideEditResourceModal();
                alert('Resource updated successfully!');
            }
        }

        function showDeleteConfirmation(id) {
            resourceToDelete = id;
            deleteConfirmationModal.classList.remove('hidden');
        }

        function hideDeleteConfirmation() {
            resourceToDelete = null;
            deleteConfirmationModal.classList.add('hidden');
        }

        function confirmDeleteResource() {
            if (resourceToDelete === null) return;
            
            const index = resources.findIndex(r => r.id === resourceToDelete);
            if (index !== -1) {
                const deletedResource = resources.splice(index, 1)[0];
                filteredResources = [...resources];
                renderResources(filteredResources);
                renderAdminResources();
                alert(`"${deletedResource.title}" has been deleted successfully!`);
            }
            
            hideDeleteConfirmation();
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
    </html>
